{% extends "upload/layer_upload_base.html" %}

{% load i18n %}
{% load base_tags %}
{% load staticfiles %} 

{% load static %}
{% load floppyforms %}

      
      
	   <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">  </script>
	   <script type = "text/javascript" src = "https://datasovereignty.cloud.edu.au/static/ds_assets/js/shpwrite.js"> </script>
	  
     <script type = "text/JavaScript">
     	
        function postGeoJSON()
        {
    
           var options = {
              folder: 'myshapes',
              types: {
                  point: 'mypoints',
                  polygon: 'mypolygons',
                  line: 'mylines'
              }
          }
          
          // a GeoJSON bridge for features
          shpwrite.download({
              type: 'FeatureCollection',
              features: [
                  {
                      type: 'Feature',
                      geometry: {
                          type: 'Point',
                          coordinates: [0, 0]
                      },
                      properties: {
                          name: 'Foo'
                      }
                  },
                  {
                      type: 'Feature',
                      geometry: {
                          type: 'Point',
                          coordinates: [0, 10]
                      },
                      properties: {
                          name: 'Bar'
                      }
                  }
              ]
          }, options); 
            
    
    
    
    
    
    
    
    
    
    	    var geoJsonP =  { 
              "type": "FeatureCollection",
              "features": [{ 
                  "type": "Feature",
                  "geometry": {"type": "Point", "coordinates": [102.0, 0.5]},
                  "properties": {"prop0": "value0"}
               }, { 
                  "type": "Feature",
                  "geometry": {
                       "type": "LineString",
                       "coordinates": [[102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0]]
                   },
                  "properties": {
                      "prop0": "value0",
                      "prop1": 0.0
                  }
               }, { 
                   "type": "Feature",
                   "geometry": {
                       "type": "Polygon",
                       "coordinates": [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]]]
                   },
                   "properties": {
                       "prop0": "value0",
                       "prop1": {"this": "that"}
                   }
                }]
              }
    
              // saveAs fn() fails with this error - Uncaught (in promise) TypeError: Failed to execute 'createObjectURL' on 'URL': Overload resolution failed. 
              
              var outLayer = "layers_map";
                var optionsX = {
                  folder: outLayer,
                  types: {
                    point: outLayer,
                    polygon: outLayer,
                    line: outLayer,
                    polyline: outLayer
                  }
                }
                            
              /*
              var contentX = shpwrite.zip(geoJsonP,optionsX).then(function(content) {   //geoJSON2
                    //saveAs(content, 'tt.zip');
    //              
                    //console.log("trying to first parse the object " );   
    				        //object = JSON.parse(this.response);        
                    console.log("JSON.stringify(contentX) " + JSON.stringify(content)  );
    //                console.log('JSON.parse(contentX) ' + JSON.parse(content)  );
              });
              */
              
              var text = "Hello World!";
              var encoded = window.btoa(text);
              console.log('encoded:'  + encoded);
              console.log('decoded: ' + window.atob(encoded));
        }	 
				
      </script>

{% block head %}

{{ block.super }}
{% endblock %}

{% block body_outer %}     		

   <div>
      <input type = "button" onclick = "postGeoJSON();" name = "ok5" value = "POST Geonode" />	  
   </div>

{% endblock %}


{% block extra_script %}
{{ block.super }}